<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クラス＆インスタンス 入門演習</title>
    <!-- PrismJS CSS - Okaidia Theme -->
    <link href="https://unpkg.com/prismjs@1.29.0/themes/prism-okaidia.css" rel="stylesheet" />
    <!-- PrismJS JS -->
    <script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
	<script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        :root {
            --accent-color: #E8F6F3; /* より薄いパステルミント */
            --accent-hover: #D4EDDA;
            --accent-border: #C3E6CB;
        }
        
        html {
            font-size: 16px;
        }
        
        body {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Hiragino Kaku Gothic ProN", sans-serif;
            font-size: 1rem;
            font-weight: 300;
            line-height: 1.8;
            color: #333;
            background-color: #f9f9f9;
        }
        
        h1 {
            font-size: 1.8rem;
            font-weight: 600;
            border-left: 0.375rem solid var(--accent-border);
            padding-left: 1rem;
            margin-bottom: 1.5rem;
            color: #333;
            text-align: center;
        }
        
        .intro {
            margin-bottom: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 0.125rem 0.5rem rgba(0,0,0,0.08);
        }
        
        .intro p {
            margin-top: 0;
            margin-bottom: 1.2rem;
        }
        
        .intro ol {
            margin-top: 0;
            margin-bottom: 0;
        }
        
        .accordion {
            margin-bottom: 1.5rem;
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 0.125rem 0.5rem rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .accordion-header {
            background: var(--accent-color);
            color: #2c3e50;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border: none;
        }
        
        .accordion-header:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }
        
        .accordion-icon {
            transition: transform 0.3s ease;
            font-size: 0.9rem;
            color: #2c3e50;
        }
        
        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }
        
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }
        
        .accordion-content.active {
            max-height: 3000px;
        }
        
        .content-section {
            padding: 2rem;
        }
        
        .code-section, .result-section {
            margin-bottom: 2rem;
        }
        
        .code-section:last-child, .result-section:last-child {
            margin-bottom: 0;
        }
        
        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 1rem;
        }
        
        /* PrismJSコードブロックのスタイル調整 */
        pre[class*="language-"] {
            background: #272822 !important;
            border: 1px solid #3e3d32 !important;
            border-radius: 0.5rem !important;
            padding: 1.5rem !important;
            margin: 0 !important;
            overflow-x: auto;
            box-shadow: 0 0.125rem 0.5rem rgba(0,0,0,0.2);
            font-size: 0.875rem !important;
            line-height: 1.6 !important;
        }
        
        code[class*="language-"] {
            background: transparent !important;
            color: #f8f8f2 !important;
            font-family: 'SF Mono', Menlo, Monaco, Consolas, 'Courier New', monospace !important;
            text-shadow: 0 1px rgba(0, 0, 0, 0.3) !important;
            font-weight: 400 !important;
        }
        
        /* PrismJS Okaidiaテーマのカスタマイズ */
        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
            color: #8292a2 !important;
            font-style: italic !important;
        }
        
        .token.punctuation {
            color: #f8f8f2 !important;
        }
        
        .token.namespace {
            opacity: .7 !important;
        }
        
        .token.property,
        .token.tag,
        .token.constant,
        .token.symbol,
        .token.deleted {
            color: #f92672 !important;
        }
        
        .token.boolean,
        .token.number {
            color: #ae81ff !important;
        }
        
        .token.selector,
        .token.attr-name,
        .token.string,
        .token.char,
        .token.builtin,
        .token.inserted {
            color: #a6e22e !important;
        }
        
        .token.operator,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .style .token.string,
        .token.variable {
            color: #f8f8f2 !important;
        }
        
        .token.atrule,
        .token.attr-value,
        .token.function,
        .token.class-name {
            color: #e6db74 !important;
        }
        
        .token.keyword {
            color: #66d9ef !important;
            font-weight: 500 !important;
        }
        
        .token.regex,
        .token.important {
            color: #fd971f !important;
        }
        
        .token.important,
        .token.bold {
            font-weight: bold !important;
        }
        
        .token.italic {
            font-style: italic !important;
        }
        
        .token.entity {
            cursor: help !important;
        }
        
        .result-block {
            background: linear-gradient(135deg, #fafcff 0%, #f0f7ff 100%);
            padding: 1.5rem;
            border: 1px solid var(--accent-border);
            border-radius: 0.5rem;
            margin-top: 1rem;
            box-shadow: 0 0.125rem 0.5rem rgba(195, 230, 203, 0.15);
            font-family: 'SF Mono', Menlo, Monaco, Consolas, monospace;
            font-size: 0.9rem;
            font-weight: 400;
            white-space: pre-wrap;
            position: relative;
            transition: all 0.2s ease;
            line-height: 1.8;
        }
        
        .result-block:hover {
            transform: translateY(-1px);
            box-shadow: 0 0.25rem 0.75rem rgba(195, 230, 203, 0.2);
        }
        
        .result-block::before {
            content: "result";
            display: block;
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Hiragino Kaku Gothic ProN", sans-serif;
            font-size: 0.75rem;
            font-weight: 600;
            color: #2c3e50;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--accent-border);
        }

        /* resultの各行に余白を追加 */
        .result-item {
            margin-bottom: 0.8rem;
            padding: 0.3rem 0;
        }
        
        .result-item:last-child {
            margin-bottom: 0;
        }

        /* スマホ向け (〜37.5rem = 600px) */
        @media screen and (max-width: 37.5rem) {
            body { 
                padding: 0.75rem; 
                font-size: 0.8rem; /* さらに小さく */
            }
            
            h1 { 
                font-size: 1.3rem; /* より小さく */
                text-align: left;
                padding-left: 0.75rem;
            }
            
            .intro { 
                padding: 1.25rem; 
                margin-bottom: 1.5rem; 
            }
            
            .accordion { 
                margin-bottom: 1.25rem; 
            }
            
            .content-section { 
                padding: 1.25rem; 
            }
            
            .code-section, .result-section { 
                margin-bottom: 1.25rem; 
            }
            
            .section-title { 
                font-size: 0.95rem; /*より小さく */
            }
            
            .accordion-header { 
                padding: 0.75rem 1rem; /* より詰める */
                font-size: 0.9rem; /* より小さく */
            }
            
            pre[class*="language-"] {
                font-size: 0.7rem !important; /* さらに小さく */
                padding: 0.875rem !important; 
            }
            
            .result-block { 
                font-size: 0.75rem; /* より小さく */
                padding: 1rem;
                line-height: 1.5; 
            }
            
            .result-item {
                margin-bottom: 0.6rem;
                padding: 0.2rem 0;
            }
        }

        /* タブレット向け (37.5625rem〜64rem = 601px〜1024px) */
        @media screen and (min-width: 37.5625rem) and (max-width: 64rem) {
            body { 
                padding: 1.5rem; 
                font-size: 0.9rem; 
            }
            
            h1 { 
                font-size: 1.6rem; 
            }
            
            .intro { 
                padding: 1.75rem; 
                margin-bottom: 1.75rem; 
            }
            
            .accordion { 
                margin-bottom: 1.25rem; 
            }
            
            .content-section { 
                padding: 1.75rem; 
            }
            
            .section-title { 
                font-size: 1rem; 
            }
            
            .accordion-header { 
                font-size: 1rem; 
            }
        }
    </style>
</head>
<body>
    <h1>JavaScript クラス＆インスタンス演習</h1>
    
    <div class="intro">
        <p>
            この演習では、<strong>オブジェクト</strong>、<strong>プロパティ</strong>、<strong>メソッド</strong>の定義を学び、
            クラスとインスタンスで実際に動かすことで仕組みを認識します。さらに、<strong>入れ子構造</strong>の理解を深めるトレーニングです。
        </p>
        <ol>
            <li>クラスを定義してオブジェクトの「設計図」を作成する</li>
            <li><code>new</code>キーワードでインスタンスを生成し、実物のオブジェクトを作成する</li>
            <li>インスタンスのメソッドを呼び出して処理を実行する</li>
            <li>入れ子構造（クラスの中に別クラスのインスタンスを保持する関係）を確認する</li>
        </ol>
    </div>

    <!-- 演習①: Humanクラス -->
    <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(0)">
            <span>① Human（人間についてメソッドで定義）</span>
            <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
            <div class="content-section">
                <div class="code-section">
                    <h2 class="section-title">コード</h2>
                    <pre><code class="language-javascript" id="code1"></code></pre>
                </div>
                <div class="result-section">
                    <div class="result-block" id="result1"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 演習②: Sweetsクラス -->
    <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(1)">
            <span>② Sweets（お菓子お菓子の情報）</span>
            <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
            <div class="content-section">
                <div class="code-section">
                    <h2 class="section-title">コード</h2>
                    <pre><code class="language-javascript" id="code2"></code></pre>
                </div>
                <div class="result-section">
                    <div class="result-block" id="result2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 演習③: FrozenDesertクラス -->
    <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(2)">
            <span>③ FrozenDesert（アイスの紹介）</span>
            <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
            <div class="content-section">
                <div class="code-section">
                    <h2 class="section-title">コード</h2>
                    <pre><code class="language-javascript" id="code3"></code></pre>
                </div>
                <div class="result-section">
                    <div class="result-block" id="result3"></div>
                </div>
            </div>
        </div>
    </div>

    

    <script>
        // アコーディオンの開閉機能
        function toggleAccordion(index) {
            const headers = document.querySelectorAll('.accordion-header');
            const contents = document.querySelectorAll('.accordion-content');
            
            headers[index].classList.toggle('active');
            contents[index].classList.toggle('active');
        }

        // コードを表示する関数
        function displayCode() {
            // 演習①のコード
            const code1 = `// ① Humanクラス：人間についてメソッドで定義
class Human {
  constructor(name) {         // 初期値設定、これをインスタンス生成のために使う
    this.name = name;
  }
  walk(step) {                // 歩くメソッド
    console.log(\`\${this.name}は\${step}歩歩けます\`);
  }

  speak(who) {                // 会話メソッド
    console.log(\`\${this.name}は\${who}とおしゃべりします。\`);
  }

  cooking(food) {             // 食べたものメソッド
    console.log(\`今日の\${this.name}のご飯は\${food}でした。\`);
  }
}

// インスタンス生成＆メソッド呼び出し
const person1 = new Human('りんちゃん');
const person2 = new Human('うーろんくん');

person1.walk(10);
person1.speak('うーろんくん');
person1.cooking('パイナップル');

person2.walk(3);
person2.speak('りんちゃん');
person2.cooking('カレー');`;

            // 演習②のコード
            const code2 = `// ② Sweetsクラス：お菓子の情報をまとめ、表示メソッドを用いてコンソールに表示する
// 前だけ先に設定してから別メソッドで残りをまとめて設定するパターン
class Sweets {
  constructor(name) {
    this.name = name;   // お菓子の名前
    this.taste = '';
    this.flavor = '';
    this.point = '';
    this.place = '';
  }
  // printTaste メソッド：引数で受け取った taste をthis.tasteに格納して表示
  printTaste(taste) {          // 味の説明
    this.taste = taste;
    console.log(\`\${this.name}は\${this.taste}です。\`);
  }

  printFlavor(flavor) {        // 風味の説明
    this.flavor = flavor;
    console.log(\`\${this.name}のお気に入りの味は\${this.flavor}です。\`);
  }

  printPoint(point) {          // ポイントの説明
    this.point = point;
    console.log(\`\${this.flavor}味のポイントは\${this.point}です。\`);
  }

  printBuy(place) {            // 購入場所の説明
    this.place = place;
    console.log(\`\${this.flavor}は\${this.place}で買えます。\`);
  }
}

// インスタンス生成＆メソッド呼び出し
const sweets1 = new Sweets('ハーゲンダッツ');
sweets1.printTaste('美味しい');
sweets1.printFlavor('マカダミアナッツ');
sweets1.printPoint('期待以上のマカダミアナッツ感');
sweets1.printBuy('どこでも');

const sweets2 = new Sweets('ポテトチップス');
sweets2.printTaste('無限に食べられるお菓子');
sweets2.printFlavor('カルビーのうす塩');
sweets2.printPoint('パリパリ感');
sweets2.printBuy('どこでも');`;

            // 演習③のコード
            const code3 = `// ③アイスクリームクラス：複数のアイスクリームを一括説明する
// インスタンス生成時に全プロパティを一気に初期化するパターン：
class FrozenDesert {
    constructor(name, taste, howeat) {
        this.name = name;
        this.taste = taste;
        this.howeat = howeat;
    }

    describe() {
        console.log(this.name + 'は' + this.taste + 'です。' + this.howeat + 'のがおすすめの食べ方です。');
    }
}

const icecream1 = new FrozenDesert
('ハーゲンダッツマカダミアナッツ味','ごろごろマカダミアナッツが嬉しい美味しさ','好きな人と一緒に食べる');
const icecream2 = new FrozenDesert
('パリッテ','パリパリチョコが存分に楽しめるアイス','とにかくパリパリを楽しみたい時に食べる');
const icecream3 = new FrozenDesert
('パルム','絶妙な口溶けがなんとも言えない','可愛いフォルムをそっと愛でながらやさしい気持ちで味わう');
const icecream4 = new FrozenDesert
('ガリガリくんパイン味','リアルパイナップルを思わせる食感','パイナップルに想いを馳せて食べる');

// 配列にまとめて一括説明
const menu = [icecream1, icecream2, icecream3, icecream4];
menu.forEach(item => item.describe());`;

            // コードを各要素に設定
            document.getElementById('code1').textContent = code1;
            document.getElementById('code2').textContent = code2;
            document.getElementById('code3').textContent = code3;
        }

        // 実際のコード実行と結果表示
        function runCode() {
            // 結果を保存する配列
            let results1 = [];
            let results2 = [];
            let results3 = [];

            // console.logを一時的に上書きして結果をキャプチャ
            const originalLog = console.log;

            // 演習①の実行
            console.log = (message) => results1.push(message);
            
            // ① Humanクラス：人間についてメソッドで定義
            class Human {
              constructor(name) {
                this.name = name;
              }
              walk(step) {
                console.log(`${this.name}は${step}歩歩けます`);
              }
              speak(who) {
                console.log(`${this.name}は${who}とおしゃべりします。`);
              }
              cooking(food) {
                console.log(`今日の${this.name}のご飯は${food}でした。`);
              }
            }

            const person1 = new Human('りんちゃん');
            const person2 = new Human('うーろんくん');

            person1.walk(10);
            person1.speak('うーろんくん');
            person1.cooking('パイナップル');

            person2.walk(3);
            person2.speak('りんちゃん');
            person2.cooking('カレー');

            // 演習②の実行
            console.log = (message) => results2.push(message);

            class Sweets {
              constructor(name) {
                this.name = name;
                this.taste = '';
                this.flavor = '';
                this.point = '';
                this.place = '';
              }
              printTaste(taste) {
                this.taste = taste;
                console.log(`${this.name}は${this.taste}です。`);
              }
              printFlavor(flavor) {
                this.flavor = flavor;
                console.log(`${this.name}のお気に入りの味は${this.flavor}です。`);
              }
              printPoint(point) {
                this.point = point;
                console.log(`${this.flavor}味のポイントは${this.point}です。`);
              }
              printBuy(place) {
                this.place = place;
                console.log(`${this.flavor}は${this.place}で買えます。`);
              }
            }

            const sweets1 = new Sweets('ハーゲンダッツ');
            sweets1.printTaste('美味しい');
            sweets1.printFlavor('マカダミアナッツ');
            sweets1.printPoint('期待以上のマカダミアナッツ感');
            sweets1.printBuy('どこでも');

            const sweets2 = new Sweets('ポテトチップス');
            sweets2.printTaste('無限に食べられるお菓子');
            sweets2.printFlavor('カルビーのうす塩');
            sweets2.printPoint('パリパリ感');
            sweets2.printBuy('どこでも');

            // 演習③の実行
            console.log = (message) => results3.push(message);

            class FrozenDesert {
                constructor(name, taste, howeat) {
                    this.name = name;
                    this.taste = taste;
                    this.howeat = howeat;
                }

                describe() {
                    console.log(this.name + 'は' + this.taste + 'です。' + this.howeat + 'のがおすすめの食べ方です。');
                }
            }

            const icecream1 = new FrozenDesert
            ('ハーゲンダッツマカダミアナッツ味','ごろごろマカダミアナッツが嬉しい美味しさ','好きな人と一緒に食べる');
            const icecream2 = new FrozenDesert
            ('パリッテ','パリパリチョコが存分に楽しめるアイス','とにかくパリパリを楽しみたい時に食べる');
            const icecream3 = new FrozenDesert
            ('パルム','絶妙な口溶けがなんとも言えない','可愛いフォルムをそっと愛でながらやさしい気持ちで味わう');
            const icecream4 = new FrozenDesert
            ('ガリガリくんパイン味','リアルパイナップルを思わせる食感','パイナップルに想いを馳せて食べる');

            const menu = [icecream1, icecream2, icecream3, icecream4];
            menu.forEach(item => item.describe());

            // console.logを元に戻す
            console.log = originalLog;

            // 結果を項目ごとに余白を追加して表示
            function formatResults(results) {
                return results.map(result => `<div class="result-item">${result}</div>`).join('');
            }

            // 演習②専用の結果フォーマット（ハーゲンダッツとポテトチップスでグループ分け）
            function formatResults2(results) {
                const formatted = results.map(result => `<div class="result-item">${result}</div>`);
                // ハーゲンダッツ（最初の4項目）とポテトチップス（次の4項目）の間に改行を追加
                if (formatted.length >= 8) {
                    formatted.splice(4, 0, '<br>');
                }
                return formatted.join('');
            }

            document.getElementById('result1').innerHTML = formatResults(results1);
            document.getElementById('result2').innerHTML = formatResults2(results2);
            document.getElementById('result3').innerHTML = formatResults(results3);
        }

        // PrismJSの初期化と実行
        function initializePrism() {
            displayCode();
            runCode();
            
            // PrismJSが読み込まれているかチェック
            if (typeof Prism !== 'undefined') {
                console.log('PrismJS loaded successfully');
                Prism.highlightAll();
            } else {
                console.log('PrismJS not loaded, retrying...');
                // 500ms後に再試行
                setTimeout(() => {
                    if (typeof Prism !== 'undefined') {
                        Prism.highlightAll();
                        console.log('PrismJS loaded on retry');
                    } else {
                        console.log('PrismJS failed to load');
                    }
                }, 500);
            }
        }

        // ページ読み込み時に実行
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePrism);
        } else {
            initializePrism();
        }
    </script>
</body>
</html>